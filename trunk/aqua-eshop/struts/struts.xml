<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.1.7//EN"
    "http://struts.apache.org/dtds/struts-2.1.7.dtd">

<struts>
    <!--  Overwrite Convention -->
    <constant name="struts.convention.action.suffix" value="Controller"/>
    <constant name="struts.convention.action.mapAllMatches" value="true"/>
    <constant name="struts.convention.default.parent.package" value="rest-default"/>
    
    <constant name="struts.action.extension" value="action,do,xhtml,xml,json"/>
    <constant name="struts.convention.package.locators" value="json"/>
    <constant name="struts.rest.defaultExtension" value="json" />
    
    <package name="loginPackage" extends="struts-default" namespace="/loginPackage" >
        <action name="authImagePingTaiAction" class="com.aqua.pingtai.action.AuthImageAction"></action>
    </package>

    <!-- 处理未知 Result -->
    <bean type="com.opensymphony.xwork2.UnknownHandler" name="notHandler" class="com.aqua.pingtai.struts.extend.action.NotHandler"/>
    
    <!-- 
    <include file="com/aqua/pingtai/resources/struts-login.xml" />
    <include file="com/aqua/pingtai/resources/struts-pingTai.xml" />
    <include file="com/aqua/pingtai/resources/struts-application.xml" />
     -->

    <!-- Json Action -->
    <package name="jsonPackage" extends="json-default" namespace="/jsonPackage">
		<global-results>
	        <result name="success" type="json"><param name="root">success</param></result>
	        <result name="error" type="json"><param name="root">error</param></result>
	        <result name="login" type="json"><param name="root">login</param></result>
	        <!-- <result name="exception" type="json">exception</result> -->
		</global-results>
		<global-exception-mappings>
		   <exception-mapping exception="java.lang.Exception" result="exception"/>
		</global-exception-mappings>
        <action name="loginJsonAction" class="loginJsonAction">
            <result name="jsonMenu" type="json">
                <param name="root">jsonOperator</param>
            </result>
        </action>
        <action name="dictJsonAction" class="dictJsonAction">
            <result name="dictType" type="json">
                <param name="root">dictTypeMap</param>
            </result>
            <result name="dict" type="json">
                <param name="root">dictMap</param>
            </result>
        </action>
    </package>

    <unknown-handler-stack>
        <unknown-handler-ref name="notHandler" />
    </unknown-handler-stack>
    
</struts>
